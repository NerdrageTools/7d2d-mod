<configs>
	<append xpath="/buffs">
		<buff name="buffIsJumping" hidden="true" remove_on_death="true">
			<stack_type value="ignore" />
			<duration value="1" />

			<effect_group name="Gain Jumping XP">
				<requirement name="CVarCompare" cvar="$Mastery_Jumping_Lvl" operation="LT" value="10" />

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Jumping_XP" operation="add" value="1" />
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" target="self" buff="buffLvlJumping" />
			</effect_group>
		</buff>

		<buff name="buffLvlJumping" hidden="true" remove_on_death="true">
			<stack_type value="ignore" />
			<duration value="1" />

			<effect_group name="Level Up Jumping">
				<requirement name="CVarCompare" cvar="$Mastery_Jumping_XP" operation="GTE" value="@$Mastery_Jumping_XPTarget" />

				<!-- -->
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Jumping_Lvl" />
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Jumping_XP" />
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Jumping_XPTarget" />
				<!-- -->

				<triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message="Your Mastery of Jumping Has Increased!" />
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="levelup" play_in_head="true" />

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Jumping_Lvl" operation="add" value="1" />
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Jumping_XP" operation="set" value="0" />
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Jumping_XPTarget" operation="set" value="@$Mastery_Jumping_Lvl" />
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Jumping_XPTarget" operation="multiply" value="100" />

				<!-- -->
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Jumping_XP" />
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Jumping_XPTarget" />
				<!-- -->
			</effect_group>
		</buff>

		<buff name="buffIsRunning" hidden="true" remove_on_death="true">
			<stack_type value="ignore" />
			<duration value="10000" />
			<update_rate value="1" />

			<effect_group name="Gain Running XP">
				<requirement name="CVarCompare" cvar="$Mastery_Running_Lvl" operation="LT" value="10" />

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$Mastery_Running_XP" operation="add" value="1" />
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffIsRunning">
					<requirement name="!EntityHasMovementTag" tags="running" />
				</triggered_effect>
				
				<triggered_effect trigger="onSelfBuffRemove" action="AddBuff" target="self" buff="buffLvlRunning">
					<requirement name="CVarCompare" cvar="$Mastery_Running_XP" operation="GTE" value="@$Mastery_Running_XPTarget" />
				</triggered_effect>
			</effect_group>
		</buff>

		<buff name="buffLvlRunning" hidden="true" remove_on_death="true">
			<stack_type value="ignore" />
			<duration value="5" />

			<effect_group name="Level Up Running">
				<requirement name="CVarCompare" cvar="$Mastery_Running_Lvl" operation="LT" value="10" />
				<requirement name="CVarCompare" cvar="$Mastery_Running_XP" operation="GTE" value="@$Mastery_Running_XPTarget" />

				<!-- -->
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Running_Lvl" />
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Running_XP" />
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Running_XPTarget" />
				<!-- -->

				<triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message="Your Mastery of Running Has Increased!" />
				<triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="levelup" play_in_head="true" />

				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Running_Lvl" operation="add" value="1" />
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Running_XP" operation="set" value="0" />
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Running_XPTarget" operation="set" value="@$Mastery_Running_Lvl" />
				<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$Mastery_Running_XPTarget" operation="multiply" value="100" />

				<!-- -->
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Running_XP" />
					<triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="$Mastery_Running_XPTarget" />
				<!-- -->
			</effect_group>
		</buff>
	</append>
</configs>